{"ast":null,"code":"import _regeneratorRuntime from\"D:/React/shopsuey/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"D:/React/shopsuey/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/React/shopsuey/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{Link,Navigate,useNavigate}from'react-router-dom';import{Helmet}from'react-helmet-async';import{useContext,useEffect,useReducer}from'react';import Row from'react-bootstrap/Row';import axios from'axios';import Col from'react-bootstrap/Col';import MessageBox from'../components/MessageBox';import ListGroup from'react-bootstrap/ListGroup';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{Store}from'../Store';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry Out of Stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),\" \",/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),\" \",/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return removeItemHandler(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:checkoutHandler,variant:\"primary\",disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})})]})]});}","map":{"version":3,"names":["React","Link","Navigate","useNavigate","Helmet","useContext","useEffect","useReducer","Row","axios","Col","MessageBox","ListGroup","Button","Card","Store","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","length","map","image","name","slug","price","reduce","a","c"],"sources":["D:/React/shopsuey/client/src/screens/CartScreen.js"],"sourcesContent":["import React from 'react';\r\nimport { Link, Navigate, useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { useContext, useEffect, useReducer } from 'react'\r\nimport Row from 'react-bootstrap/Row';\r\nimport axios from 'axios';\r\nimport Col from 'react-bootstrap/Col';\r\nimport MessageBox from '../components/MessageBox';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { Store } from '../Store';\r\n\r\nexport default function CartScreen() {\r\n    const navigate = useNavigate();\r\n    const{ state, dispatch: ctxDispatch } = useContext(Store);\r\n    const{\r\n        cart:{cartItems},\r\n    } = state;\r\n\r\n    const updateCartHandler = async (item, quantity) => {\r\n        const {data} = await axios.get(`/api/products/${item._id}`);\r\n        if(data.countInStock < quantity) {\r\n\r\n            window.alert('Sorry Out of Stock');\r\n            return;\r\n          }\r\n          ctxDispatch({\r\n            type: 'CART_ADD_ITEM',\r\n            payload: {...item, quantity}\r\n          });\r\n    }\r\n    const removeItemHandler = (item) => {\r\n        ctxDispatch({type:'CART_REMOVE_ITEM', payload: item});\r\n\r\n    }\r\n\r\n    const checkoutHandler = () => {\r\n        navigate('/signin?redirect=/shipping');\r\n    };\r\n\r\n  return (\r\n    <div>\r\n        <Helmet>\r\n            <title>Shopping Cart</title>\r\n        </Helmet>\r\n        <h1>Shopping Cart</h1>\r\n        \r\n        <Row>\r\n            <Col md = {8}>\r\n                {cartItems.length === 0 ? (\r\n                    <MessageBox>\r\n                        Cart is empty. <Link to=\"/\">Go Back Shopping</Link>\r\n                    </MessageBox>\r\n                ):\r\n                (\r\n                    <ListGroup>\r\n                        {cartItems.map((item) => (\r\n                            <ListGroup.Item key={item._id}>\r\n                                <Row className=\"align-items-center\">\r\n                                    <Col md = {4}>\r\n                                        <img\r\n                                         src={item.image}\r\n                                         alt={item.name}\r\n                                         className=\"img-fluid rounded img-thumbnail\">\r\n\r\n                                         </img>{\" \"}\r\n                                         <Link to={`/product/${item.slug}`}>{item.name}</Link>\r\n                                    </Col>\r\n                                    <Col md = {3}>\r\n                                        <Button variant=\"light\" \r\n                                                onClick={() =>\r\n                                                    updateCartHandler(item, item.quantity - 1)}\r\n                                                disabled={item.quantity === 1}    \r\n                                                >\r\n                                            <i className='fas fa-minus-circle'></i>\r\n                                        </Button>{\" \"}\r\n                                        <span>{item.quantity}</span>{\" \"}\r\n                                        <Button variant=\"light\" \r\n                                                onClick={() =>\r\n                                                    updateCartHandler(item, item.quantity + 1)}\r\n                                                >\r\n                                            <i className='fas fa-plus-circle'></i>\r\n                                        </Button>\r\n                                    </Col>\r\n                                    <Col md = {3}>${item.price}</Col>\r\n                                    <Col md = {2}>\r\n                                        <Button variant='light'\r\n                                                onClick={()=>removeItemHandler(item)}>\r\n                                            <i className='fas fa-trash'></i>\r\n                                        </Button>\r\n                                    </Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n                            \r\n                        ))}\r\n                    </ListGroup>\r\n                )} \r\n            </Col>\r\n            <Col md = {4}>\r\n                <Card>\r\n                    <Card.Body>\r\n                        <ListGroup variant='flush'>\r\n                            <ListGroup.Item>\r\n                                <h3>\r\n                                    Subtotal ({cartItems.reduce((a,c) => a + c.quantity, 0)}{' '}\r\n                                    items) : $\r\n                                    {cartItems.reduce((a,c) => a + c.price * c.quantity, 0)}\r\n                                </h3>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <div className='d-grid'>\r\n                                    <Button\r\n                                     type=\"button\"\r\n                                     onClick={checkoutHandler}\r\n                                     variant='primary'\r\n                                     disabled={cartItems.length===0}>Proceed to Checkout</Button>\r\n                                </div>\r\n                            </ListGroup.Item>\r\n                        </ListGroup>\r\n                    </Card.Body>\r\n                </Card>\r\n            </Col>\r\n        </Row>\r\n    </div>\r\n    \r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}